{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport axios from 'axios';\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\nimport { doc, setDoc, getFirestore, getDocs, collection, query, where, addDoc } from \"firebase/firestore\";\nimport { app } from \"./firebaseConfig\";\nvar auth = getAuth(app);\nvar authServices = _createClass(function authServices() {\n  _classCallCheck(this, authServices);\n});\nauthServices.login = function () {\n  var _ref = _asyncToGenerator(function* (email, pass, context) {\n    var r;\n    try {\n      var _yield$signInWithEmai = yield signInWithEmailAndPassword(auth, email, pass),\n        user = _yield$signInWithEmai.user;\n      context.setUser(user);\n      console.log(user);\n      r = {\n        type: \"success\",\n        text1: \"Inicio de sesion exitoso\",\n        text2: \"La sesion a iniciado correctamente.\"\n      };\n    } catch (error) {\n      console.log(error);\n      r = {\n        type: \"error\",\n        text1: \"Error\",\n        text2: \"Ha ocurrido un error al iniciar sesion.\"\n      };\n    }\n    return r;\n  });\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nauthServices.logout = _asyncToGenerator(function* () {\n  auth.signOut();\n});\nauthServices.fetchData = function () {\n  var _ref3 = _asyncToGenerator(function* (db, userUid) {\n    var perfilRef = collection(db, \"users\");\n    var q = query(perfilRef, where(\"uid\", \"==\", userUid));\n    var data = [];\n    try {\n      var querySnapshot = yield getDocs(q);\n      querySnapshot.forEach(function (doc) {\n        data.push(doc.data());\n      });\n    } catch (error) {\n      console.error(error);\n    }\n    return data;\n  });\n  return function (_x4, _x5) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nauthServices.register = function () {\n  var _ref4 = _asyncToGenerator(function* (email, pass) {\n    var r;\n    try {\n      var _yield$createUserWith = yield createUserWithEmailAndPassword(auth, email, pass),\n        user = _yield$createUserWith.user;\n      r = {\n        type: \"success\",\n        text1: \"Registro exitoso\",\n        text2: \"El usuario ha sido creado correctamente.\"\n      };\n    } catch (error) {\n      console.log(error);\n      r = {\n        type: \"error\",\n        text1: \"Error\",\n        text2: \"Ha ocurrido un error al crear el usuario.\"\n      };\n    }\n    return r;\n  });\n  return function (_x6, _x7) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nauthServices.editProfile = function () {\n  var _ref5 = _asyncToGenerator(function* (username, name, surname, email, uid) {\n    var r;\n    try {\n      var db = getFirestore();\n      yield setDoc(doc(db, \"users\", uid), {\n        username: username,\n        name: name,\n        surname: surname,\n        email: email,\n        uid: uid\n      });\n      r = {\n        type: \"success\",\n        text1: \"Edicion exitosa\",\n        text2: \"El perfil ha sido editado correctamente.\"\n      };\n    } catch (error) {\n      console.log(error);\n      r = {\n        type: \"error\",\n        text1: \"Error\",\n        text2: \"Ha ocurrido un error al editar el perfil.\"\n      };\n    }\n    return r;\n  });\n  return function (_x8, _x9, _x10, _x11, _x12) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar thoughtServices = _createClass(function thoughtServices() {\n  _classCallCheck(this, thoughtServices);\n});\nthoughtServices.fetchThoughts = function () {\n  var _ref6 = _asyncToGenerator(function* (db) {\n    var thoughtsRef = collection(db, \"thoughts\");\n    var q = query(thoughtsRef);\n    var data = [];\n    try {\n      var querySnapshot = yield getDocs(q);\n      querySnapshot.forEach(function (doc) {\n        data.push(doc.data());\n      });\n    } catch (error) {\n      console.error(error);\n    }\n    return data;\n  });\n  return function (_x13) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nthoughtServices.postThought = function () {\n  var _ref7 = _asyncToGenerator(function* (post) {\n    var r;\n    try {\n      var db = getFirestore();\n      yield addDoc(collection(db, \"thoughts\"), {\n        post: post\n      });\n      r = {\n        type: \"success\",\n        text1: \"Pensamiento compartido\",\n        text2: \"\"\n      };\n    } catch (error) {\n      console.log(error);\n      r = {\n        type: \"error\",\n        text1: \"Error\",\n        text2: \"\"\n      };\n    }\n    return r;\n  });\n  return function (_x14) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nexport { authServices, thoughtServices };","map":{"version":3,"names":["axios","getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","doc","setDoc","getFirestore","getDocs","collection","query","where","addDoc","app","auth","authServices","_createClass","_classCallCheck","login","_ref","_asyncToGenerator","email","pass","context","r","_yield$signInWithEmai","user","setUser","console","log","type","text1","text2","error","_x","_x2","_x3","apply","arguments","logout","signOut","fetchData","_ref3","db","userUid","perfilRef","q","data","querySnapshot","forEach","push","_x4","_x5","register","_ref4","_yield$createUserWith","_x6","_x7","editProfile","_ref5","username","name","surname","uid","_x8","_x9","_x10","_x11","_x12","thoughtServices","fetchThoughts","_ref6","thoughtsRef","_x13","postThought","_ref7","post","_x14"],"sources":["C:/Users/Martin/Desktop/PracticaRN-Login/scripts.js"],"sourcesContent":["import axios from 'axios';\r\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { doc, setDoc, getFirestore, getDocs, collection, query, where, addDoc } from \"firebase/firestore\"\r\nimport { app } from \"./firebaseConfig\";\r\n\r\nconst auth = getAuth(app);\r\n\r\nclass authServices {\r\n  static login = async (email, pass, context) => {\r\n    let r;\r\n    try {\r\n      const { user } = await signInWithEmailAndPassword(\r\n        auth,\r\n        email,\r\n        pass\r\n      );\r\n      context.setUser(user);\r\n      console.log(user);\r\n      r = {\r\n        type: \"success\",\r\n        text1: \"Inicio de sesion exitoso\",\r\n        text2: \"La sesion a iniciado correctamente.\",\r\n      };\r\n    } catch (error) {\r\n      console.log(error);\r\n      r = {\r\n        type: \"error\",\r\n        text1: \"Error\",\r\n        text2: \"Ha ocurrido un error al iniciar sesion.\",\r\n      };\r\n    }\r\n    return r;\r\n  };\r\n\r\n  static logout = async () => {\r\n    auth.signOut();\r\n  };\r\n\r\n  static fetchData = async (db, userUid) => {\r\n    const perfilRef = collection(db, \"users\")\r\n    const q = query(perfilRef, where(\"uid\", \"==\", userUid));\r\n    const data = [];\r\n    try {\r\n      const querySnapshot = await getDocs(q);\r\n      querySnapshot.forEach((doc) => {\r\n        data.push(doc.data());\r\n      });\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n    return data;\r\n  };\r\n\r\n  static register = async (email, pass) => {\r\n    let r;\r\n    try {\r\n      const { user } = await createUserWithEmailAndPassword(\r\n        auth,\r\n        email,\r\n        pass\r\n      );\r\n      r = {\r\n        type: \"success\",\r\n        text1: \"Registro exitoso\",\r\n        text2: \"El usuario ha sido creado correctamente.\",\r\n      };\r\n    } catch (error) {\r\n      console.log(error);\r\n      r = {\r\n        type: \"error\",\r\n        text1: \"Error\",\r\n        text2: \"Ha ocurrido un error al crear el usuario.\",\r\n      };\r\n    }\r\n    return r;\r\n  };\r\n\r\n  static editProfile = async (username, name, surname, email, uid) => {\r\n    let r;\r\n    try {\r\n      const db = getFirestore();\r\n      await setDoc(doc(db, \"users\", uid), {\r\n        username,\r\n        name,\r\n        surname,\r\n        email,\r\n        uid,\r\n      });\r\n      r = ({\r\n        type: \"success\",\r\n        text1: \"Edicion exitosa\",\r\n        text2: \"El perfil ha sido editado correctamente.\",\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n      r = ({\r\n        type: \"error\",\r\n        text1: \"Error\",\r\n        text2: \"Ha ocurrido un error al editar el perfil.\",\r\n      });\r\n    }\r\n    return r;\r\n  }\r\n}\r\n\r\nclass thoughtServices {\r\n  static fetchThoughts = async (db) => {\r\n    const thoughtsRef = collection(db, \"thoughts\")\r\n    const q = query(thoughtsRef);\r\n    const data = [];\r\n    try {\r\n      const querySnapshot = await getDocs(q);\r\n      querySnapshot.forEach((doc) => {\r\n        data.push(doc.data());\r\n      });\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n    return data;\r\n  };\r\n  static postThought = async (post) => {\r\n    let r;\r\n    try {\r\n      const db = getFirestore();\r\n      await addDoc(collection(db, \"thoughts\"), {\r\n        post\r\n      });\r\n      r = ({\r\n        type: \"success\",\r\n        text1: \"Pensamiento compartido\",\r\n        text2: \"\",\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n      r = ({\r\n        type: \"error\",\r\n        text1: \"Error\",\r\n        text2: \"\",\r\n      });\r\n    }\r\n    return r;\r\n  };\r\n}\r\n\r\nexport {\r\n  authServices,\r\n  thoughtServices\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}