{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { StatusBar } from 'expo-status-bar';\nimport { useContext, useEffect, useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { userContext } from \"../contexts/userContext.js\";\nimport { dbContext } from \"../contexts/dbContext.js\";\nimport Separator from \"../Separator.js\";\nimport styles from \"../stylesheet.js\";\nimport { authServices } from \"../scripts.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar handleLogout = function () {\n  var _ref = _asyncToGenerator(function* (user, navigation) {\n    user.setUser({});\n    yield authServices.logout().then(navigation.navigate('Menu'));\n  });\n  return function handleLogout(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport default function HomeScreen(_ref2) {\n  var navigation = _ref2.navigation;\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    profile = _useState4[0],\n    setProfile = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    completeProfile = _useState6[0],\n    setCompleteProfile = _useState6[1];\n  var user = useContext(userContext);\n  var db = useContext(dbContext);\n  useEffect(function () {\n    var func = function () {\n      var _ref3 = _asyncToGenerator(function* () {\n        var r = yield authServices.fetchData(db, user.user.uid);\n        setProfile(r[0]);\n        if (r.length > 0) setCompleteProfile(true);\n        setIsLoading(false);\n      });\n      return function func() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    func();\n  }, []);\n  return _jsxs(SafeAreaView, {\n    style: styles.container,\n    children: [_jsx(View, {\n      style: styles.centeredCont,\n      children: isLoading ? _jsx(Text, {\n        children: \"Loading...\"\n      }) : _jsxs(_Fragment, {\n        children: [\" \", completeProfile ? _jsxs(_Fragment, {\n          children: [_jsx(View, {\n            style: styles.menuTitle,\n            children: _jsxs(Text, {\n              style: styles.title,\n              children: [\"Bienvenido! \", profile.name, \" \", profile.surname, \"!\"]\n            })\n          }), _jsx(Button, {\n            style: styles.button,\n            title: \"Feed\",\n            onPress: function onPress() {\n              return navigation.navigate('Profile');\n            }\n          }), _jsx(Separator, {}), _jsx(Button, {\n            style: styles.button,\n            title: \"Edita tu perfil\",\n            onPress: function onPress() {\n              return navigation.navigate('Feed');\n            }\n          })]\n        }) : _jsxs(_Fragment, {\n          children: [_jsx(View, {\n            style: styles.menuTitle,\n            children: _jsx(Text, {\n              style: styles.title,\n              children: \"Bienvenido!\"\n            })\n          }), _jsx(Separator, {}), _jsx(Button, {\n            style: styles.button,\n            title: \"Completa tu perfil\",\n            onPress: function onPress() {\n              return navigation.navigate('Profile');\n            }\n          })]\n        }), _jsx(Separator, {}), _jsx(Button, {\n          style: styles.button,\n          title: \"Cerrar Sesion\",\n          onPress: function onPress() {\n            return handleLogout(user, navigation);\n          }\n        })]\n      })\n    }), _jsx(StatusBar, {\n      style: \"auto\"\n    })]\n  });\n}","map":{"version":3,"names":["StatusBar","useContext","useEffect","useState","Text","View","SafeAreaView","Button","userContext","dbContext","Separator","styles","authServices","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","handleLogout","_ref","_asyncToGenerator","user","navigation","setUser","logout","then","navigate","_x","_x2","apply","arguments","HomeScreen","_ref2","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","profile","setProfile","_useState5","_useState6","completeProfile","setCompleteProfile","db","func","_ref3","r","fetchData","uid","length","style","container","children","centeredCont","menuTitle","title","name","surname","button","onPress"],"sources":["C:/Users/Martin/Desktop/PracticaRN-Login/screens/Home.js"],"sourcesContent":["import { StatusBar } from 'expo-status-bar';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport { Text, View, SafeAreaView, Button } from 'react-native';\r\nimport { userContext } from '../contexts/userContext.js';\r\nimport { dbContext } from '../contexts/dbContext.js';\r\nimport Separator from '../Separator.js';\r\nimport styles from '../stylesheet.js';\r\nimport { authServices } from '../scripts.js';\r\n\r\nconst handleLogout = async (user, navigation) => {\r\n  user.setUser({});\r\n  await authServices.logout()\r\n    .then(\r\n      navigation.navigate('Menu')\r\n    );\r\n}\r\n\r\nexport default function HomeScreen({ navigation }) {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [profile, setProfile] = useState([]);\r\n  const [completeProfile, setCompleteProfile] = useState(false);\r\n  const user = useContext(userContext);\r\n  const db = useContext(dbContext);\r\n\r\n\r\n  useEffect(() => {\r\n    const func = async () => {\r\n      let r = await authServices.fetchData(db, user.user.uid);\r\n      setProfile(r[0]);\r\n      if (r.length > 0) setCompleteProfile(true);\r\n      setIsLoading(false);\r\n    }\r\n    func();\r\n  }, []);\r\n\r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n      <View style={styles.centeredCont}>\r\n        {\r\n          isLoading ? <Text>Loading...</Text> : <> {\r\n            completeProfile ?\r\n              <>\r\n                <View\r\n                  style={styles.menuTitle}\r\n                >\r\n                  <Text\r\n                    style={styles.title}\r\n                  >\r\n                    Bienvenido! {profile.name} {profile.surname}!\r\n                  </Text>\r\n                </View>\r\n                <Button\r\n                  style={styles.button}\r\n                  title=\"Feed\"\r\n                  onPress={() => navigation.navigate('Profile')}\r\n                ></Button>\r\n                <Separator />\r\n                <Button\r\n                  style={styles.button}\r\n                  title=\"Edita tu perfil\"\r\n                  onPress={() => navigation.navigate('Feed')}\r\n                ></Button>\r\n              </> :\r\n              <>\r\n                <View\r\n                  style={styles.menuTitle}\r\n                >\r\n                  <Text\r\n                    style={styles.title}\r\n                  >\r\n                    Bienvenido!\r\n                  </Text>\r\n                </View>\r\n                <Separator />\r\n                <Button\r\n                  style={styles.button}\r\n                  title=\"Completa tu perfil\"\r\n                  onPress={() => navigation.navigate('Profile')}\r\n                ></Button>\r\n              </>\r\n          }\r\n            <Separator />\r\n            <Button\r\n              style={styles.button}\r\n              title=\"Cerrar Sesion\"\r\n              onPress={() => handleLogout(user, navigation)}\r\n            ></Button>\r\n          </>\r\n        }\r\n      </View>\r\n      <StatusBar style=\"auto\" />\r\n    </SafeAreaView>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}